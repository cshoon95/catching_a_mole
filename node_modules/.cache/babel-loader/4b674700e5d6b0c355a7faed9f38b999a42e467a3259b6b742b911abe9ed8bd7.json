{"ast":null,"code":"import mole from \"./Mole\";\nlet score = 0;\nexport default class Module {\n  constructor() {\n    this.getRowXColumnsCount = () => {\n      const screenData = mole.getState('screenData');\n      return screenData.row * screenData.column;\n    };\n    this.getRandomHoles = () => {\n      const screenData = mole.getState('screenData');\n      const result = [];\n      for (let i = 0; i < screenData.count; i++) {\n        result.push(mole.utils.randomNum(this.getRowXColumnsCount()));\n      }\n      return result;\n    };\n    this.getHolesEl = () => {\n      const result = [];\n      for (let i = 0; i < this.getRandomHoles().length; i++) {\n        result.push(document.getElementById(`${this.getRandomHoles()[i]}`));\n      }\n      return result;\n    };\n    this.onClick = (e, element) => {\n      // hit 이미지로 수정\n      e.target.src = '/images/mole_hit_hole.png';\n\n      // 다시 이미지 복구\n      setTimeout(() => {\n        e.target.src = '/images/mole.png';\n      }, 500);\n      score = score + 1;\n      this.catchMole(element);\n    };\n    this.setTimeStopping = () => {\n      const id = setTimeout(this.stoppingMole, 3000);\n      return id;\n    };\n    this.setTimePlying = () => {\n      const id = setTimeout(this.playingMole, 3000);\n      return id;\n    };\n    this.clearTimePlaying = () => {\n      for (let i = 0; i < this.setTimePlying(); i++) {\n        clearTimeout(i);\n      }\n    };\n    this.playingMole = () => {\n      const elList = this.getHolesEl();\n\n      // 두더지 등장\n      const showMole = () => {\n        elList.forEach(element => {\n          // 애니메이션 추가\n          mole.utils.addClassActive(element);\n\n          // 클릭 이벤트 추가 ({ once : true } 이벤트 한 번 만 실행)\n          element === null || element === void 0 ? void 0 : element.addEventListener('click', e => this.onClick(e, element), {\n            once: true\n          });\n        });\n        this.setTimeStopping();\n      };\n      showMole();\n      this.setTimePlying();\n    };\n    this.catchMole = element => {\n      mole.utils.removeClassActive(element);\n      element === null || element === void 0 ? void 0 : element.removeEventListener('click', e => this.onClick(e, element));\n    };\n    this.stoppingMole = () => {\n      for (let i = 0; i < this.getRowXColumnsCount(); i++) {\n        const element = document.getElementById(i.toString());\n        element === null || element === void 0 ? void 0 : element.removeEventListener('click', e => this.onClick(e, element));\n        mole.utils.removeClassActive(element);\n      }\n    };\n    this.getScore = () => {\n      return score;\n    };\n    this.setScore = () => {\n      mole.setState('score', 0);\n      score = 0;\n    };\n  }\n}","map":{"version":3,"names":["mole","score","Module","getRowXColumnsCount","screenData","getState","row","column","getRandomHoles","result","i","count","push","utils","randomNum","getHolesEl","length","document","getElementById","onClick","e","element","target","src","setTimeout","catchMole","setTimeStopping","id","stoppingMole","setTimePlying","playingMole","clearTimePlaying","clearTimeout","elList","showMole","forEach","addClassActive","addEventListener","once","removeClassActive","removeEventListener","toString","getScore","setScore","setState"],"sources":["/Users/soohoon/Desktop/kakao/20230207-jsh/src/core/Module.ts"],"sourcesContent":["import mole from \"./Mole\";\n\nlet score = 0;\n\nexport default class Module {\n    /** 행x열의 값 */\n    getRowXColumnsCount = () => {\n        const screenData = mole.getState('screenData');\n        return screenData.row * screenData.column;\n    }\n\n    /** 두더지가 출현할 Elment Index */\n    getRandomHoles = () => {\n        const screenData = mole.getState('screenData');\n        const result = []\n\n        for (let i=0; i<screenData.count; i++) {\n            result.push(mole.utils.randomNum(this.getRowXColumnsCount()));\n        }\n\n        return result;\n    }\n\n    /** 출현한 두더지 Element List */ \n    getHolesEl = () => {\n        const result = [];\n\n        for (let i=0; i<this.getRandomHoles().length; i++) {\n            result.push(document.getElementById(`${this.getRandomHoles()[i]}`));\n        }\n\n        return result;\n    }\n\n    onClick = (e: any, element: any) => {\n        // hit 이미지로 수정\n        e.target.src = '/images/mole_hit_hole.png';\n\n        // 다시 이미지 복구\n        setTimeout(() => {\n            e.target.src = '/images/mole.png';\n        }, 500)\n\n        score = score + 1;\n\n        this.catchMole(element)\n    }\n\n    setTimeStopping = () => {\n        const id = setTimeout(this.stoppingMole, 3000)\n        return id;\n    }\n    setTimePlying = () => {\n        const id: any = setTimeout(this.playingMole, 3000);\n        return id;\n    }\n    clearTimePlaying = () => {\n        for (let i=0; i<this.setTimePlying(); i++) {\n            clearTimeout(i);\n        }\n    }\n    /** 두더지 show */ \n    playingMole = () => {\n        const elList = this.getHolesEl();\n\n        // 두더지 등장\n        const showMole = () => {\n            elList.forEach(element => {\n                // 애니메이션 추가\n                mole.utils.addClassActive(element);\n\n                // 클릭 이벤트 추가 ({ once : true } 이벤트 한 번 만 실행)\n                element?.addEventListener('click', (e) => this.onClick(e, element), { once : true });\n            });\n\n            this.setTimeStopping();\n        }\n\n        showMole();\n        this.setTimePlying();\n    }\n\n     // 두더지 터치\n    catchMole = (element: Element) => {\n        mole.utils.removeClassActive(element);\n        element?.removeEventListener('click', (e) => this.onClick(e, element));\n    }\n\n    /** 두더지 hide */ \n    stoppingMole = () => {\n        for (let i = 0; i<this.getRowXColumnsCount(); i++) {\n            const element = document.getElementById(i.toString());\n            element?.removeEventListener('click', (e) => this.onClick(e, element));\n            mole.utils.removeClassActive(element);\n        }\n    }\n\n    /** 스코어 가져오기 */\n    getScore = () => {\n        return score;\n    }\n\n    /** 스코어 초기화 */\n    setScore = () => {\n        mole.setState('score', 0);\n        score = 0;\n    }\n}   \n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}