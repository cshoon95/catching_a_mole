{"ast":null,"code":"import mole from \"./Mole\";\nlet score = 0;\nexport default class Module {\n  constructor() {\n    this.getRowXColumnsCount = () => {\n      const screenData = mole.getState('screenData');\n      return screenData.row * screenData.column;\n    };\n    this.getRandomHoles = () => {\n      const screenData = mole.getState('screenData');\n      const result = [];\n      let dupResult = [];\n      for (let i = 0; i < screenData.count; i++) {\n        result.push(mole.utils.randomNum(this.getRowXColumnsCount()));\n      }\n      while (dupResult.length < screenData.count + 1) {\n        const set = new Set(result);\n        dupResult = Array.from(set);\n      }\n      console.log('dupResult', dupResult);\n      return dupResult;\n    };\n    this.getHolesEl = () => {\n      const result = [];\n      for (let i = 0; i < this.getRandomHoles().length; i++) {\n        result.push(document.getElementById(`${this.getRandomHoles()[i]}`));\n      }\n      return result;\n    };\n    this.playingMole = onClick => {\n      const elList = this.getHolesEl();\n      console.log('elList', elList);\n\n      // 두더지 등장\n      const showMole = () => {\n        elList.forEach(element => {\n          // 애니메이션 추가\n          mole.utils.addClassActive(element);\n\n          // 클릭 이벤트 추가\n          element === null || element === void 0 ? void 0 : element.addEventListener('click', e => {\n            // hit 이미지로 수정\n            console.log('click', score);\n            e.target.src = '/images/mole_hit_hole.png';\n            setTimeout(() => {\n              // 다시 이미지 복구\n              e.target.src = '/images/mole.png';\n            }, 500);\n\n            // 두더지 처리\n            score = score + 1;\n            catchMole(element);\n          });\n        });\n        setTimeout(this.stoppingMole, 3000);\n      };\n\n      // 두더지 터치\n      const catchMole = element => {\n        elList.forEach(element => {\n          // 애니메이션 추가\n          mole.utils.removeClassActive(element);\n          console.log('element', element);\n          // 클릭 이벤트 추가\n          element === null || element === void 0 ? void 0 : element.removeEventListener('click', e => {\n            catchMole(element);\n          });\n        });\n        clearTimeout(setTimeout(this.stoppingMole));\n        clearTimeout(setTimeout(this.playingMole));\n      };\n      showMole();\n      setTimeout(this.playingMole, 3000);\n    };\n    this.stoppingMole = () => {\n      for (let i = 0; i < this.getRowXColumnsCount(); i++) {\n        const element = document.getElementById(i.toString());\n        mole.utils.removeClassActive(element);\n        element === null || element === void 0 ? void 0 : element.removeEventListener('click', () => {});\n      }\n\n      // clearTimeout(setTimeout(this.playingMole))\n    };\n    this.getScore = () => {\n      return score;\n    };\n  }\n}","map":{"version":3,"names":["mole","score","Module","getRowXColumnsCount","screenData","getState","row","column","getRandomHoles","result","dupResult","i","count","push","utils","randomNum","length","set","Set","Array","from","console","log","getHolesEl","document","getElementById","playingMole","onClick","elList","showMole","forEach","element","addClassActive","addEventListener","e","target","src","setTimeout","catchMole","stoppingMole","removeClassActive","removeEventListener","clearTimeout","toString","getScore"],"sources":["/Users/soohoon/Desktop/kakao/20230207-jsh/src/core/Module.ts"],"sourcesContent":["import mole from \"./Mole\";\n\nlet score = 0;\n\nexport default class Module {\n    /** 행x열의 값 */\n    getRowXColumnsCount = () => {\n        const screenData = mole.getState('screenData');\n        return screenData.row * screenData.column;\n    }\n\n    /** 두더지가 출현할 Elment Index */\n    getRandomHoles = () => {\n        const screenData = mole.getState('screenData');\n        const result = []\n        let dupResult: any = []\n\n        for (let i=0; i<screenData.count; i++) {\n            result.push(mole.utils.randomNum(this.getRowXColumnsCount()));\n        }\n\n        while(dupResult.length < screenData.count + 1) {\n            \n            const set = new Set(result);\n            dupResult = Array.from(set);\n        }\n\n        console.log('dupResult', dupResult)\n        return dupResult;\n    }\n\n    /** 출현한 두더지 Element List */ \n    getHolesEl = () => {\n        const result = [];\n\n        for (let i=0; i<this.getRandomHoles().length; i++) {\n            result.push(document.getElementById(`${this.getRandomHoles()[i]}`));\n        }\n\n        return result;\n    }\n\n    /** 두더지 show */ \n    playingMole = (onClick?: Function) => {\n        const elList = this.getHolesEl();\n        console.log('elList', elList);\n\n        // 두더지 등장\n        const showMole = () => {\n            \n            elList.forEach(element => {\n                // 애니메이션 추가\n                mole.utils.addClassActive(element);\n\n                // 클릭 이벤트 추가\n                element?.addEventListener('click', (e: any) => {\n                    // hit 이미지로 수정\n                    console.log('click', score)\n                    e.target.src = '/images/mole_hit_hole.png';\n\n                    setTimeout(() => {\n                        // 다시 이미지 복구\n                        e.target.src = '/images/mole.png';\n                    }, 500)\n\n                    // 두더지 처리\n                    score = score + 1;\n                    catchMole(element)\n                });\n            });\n\n            setTimeout(this.stoppingMole, 3000);\n        }\n\n        // 두더지 터치\n        const catchMole = (element: Element) => {\n            elList.forEach(element => {\n                // 애니메이션 추가\n                mole.utils.removeClassActive(element);\n\n                console.log('element', element);\n                // 클릭 이벤트 추가\n                element?.removeEventListener('click', (e: any) => {\n                    catchMole(element)\n                });\n            });\n            \n            clearTimeout(setTimeout(this.stoppingMole));\n            clearTimeout(setTimeout(this.playingMole));\n        }\n\n        showMole();\n        setTimeout(this.playingMole, 3000);\n    }\n\n    /** 두더지 hide */ \n    stoppingMole = () => {\n        for (let i = 0; i<this.getRowXColumnsCount(); i++) {\n            const element = document.getElementById(i.toString());\n\n            mole.utils.removeClassActive(element);\n            element?.removeEventListener('click', () => {});\n        }\n\n        // clearTimeout(setTimeout(this.playingMole))\n    }\n\n    getScore = () => {\n        return score;\n    }\n}   \n"],"mappings":"AAAA,OAAOA,IAAI,MAAM,QAAQ;AAEzB,IAAIC,KAAK,GAAG,CAAC;AAEb,eAAe,MAAMC,MAAM,CAAC;EAAA;IAAA,KAExBC,mBAAmB,GAAG,MAAM;MACxB,MAAMC,UAAU,GAAGJ,IAAI,CAACK,QAAQ,CAAC,YAAY,CAAC;MAC9C,OAAOD,UAAU,CAACE,GAAG,GAAGF,UAAU,CAACG,MAAM;IAC7C,CAAC;IAAA,KAGDC,cAAc,GAAG,MAAM;MACnB,MAAMJ,UAAU,GAAGJ,IAAI,CAACK,QAAQ,CAAC,YAAY,CAAC;MAC9C,MAAMI,MAAM,GAAG,EAAE;MACjB,IAAIC,SAAc,GAAG,EAAE;MAEvB,KAAK,IAAIC,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACP,UAAU,CAACQ,KAAK,EAAED,CAAC,EAAE,EAAE;QACnCF,MAAM,CAACI,IAAI,CAACb,IAAI,CAACc,KAAK,CAACC,SAAS,CAAC,IAAI,CAACZ,mBAAmB,EAAE,CAAC,CAAC;MACjE;MAEA,OAAMO,SAAS,CAACM,MAAM,GAAGZ,UAAU,CAACQ,KAAK,GAAG,CAAC,EAAE;QAE3C,MAAMK,GAAG,GAAG,IAAIC,GAAG,CAACT,MAAM,CAAC;QAC3BC,SAAS,GAAGS,KAAK,CAACC,IAAI,CAACH,GAAG,CAAC;MAC/B;MAEAI,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEZ,SAAS,CAAC;MACnC,OAAOA,SAAS;IACpB,CAAC;IAAA,KAGDa,UAAU,GAAG,MAAM;MACf,MAAMd,MAAM,GAAG,EAAE;MAEjB,KAAK,IAAIE,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC,IAAI,CAACH,cAAc,EAAE,CAACQ,MAAM,EAAEL,CAAC,EAAE,EAAE;QAC/CF,MAAM,CAACI,IAAI,CAACW,QAAQ,CAACC,cAAc,CAAE,GAAE,IAAI,CAACjB,cAAc,EAAE,CAACG,CAAC,CAAE,EAAC,CAAC,CAAC;MACvE;MAEA,OAAOF,MAAM;IACjB,CAAC;IAAA,KAGDiB,WAAW,GAAIC,OAAkB,IAAK;MAClC,MAAMC,MAAM,GAAG,IAAI,CAACL,UAAU,EAAE;MAChCF,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEM,MAAM,CAAC;;MAE7B;MACA,MAAMC,QAAQ,GAAG,MAAM;QAEnBD,MAAM,CAACE,OAAO,CAACC,OAAO,IAAI;UACtB;UACA/B,IAAI,CAACc,KAAK,CAACkB,cAAc,CAACD,OAAO,CAAC;;UAElC;UACAA,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,gBAAgB,CAAC,OAAO,EAAGC,CAAM,IAAK;YAC3C;YACAb,OAAO,CAACC,GAAG,CAAC,OAAO,EAAErB,KAAK,CAAC;YAC3BiC,CAAC,CAACC,MAAM,CAACC,GAAG,GAAG,2BAA2B;YAE1CC,UAAU,CAAC,MAAM;cACb;cACAH,CAAC,CAACC,MAAM,CAACC,GAAG,GAAG,kBAAkB;YACrC,CAAC,EAAE,GAAG,CAAC;;YAEP;YACAnC,KAAK,GAAGA,KAAK,GAAG,CAAC;YACjBqC,SAAS,CAACP,OAAO,CAAC;UACtB,CAAC,CAAC;QACN,CAAC,CAAC;QAEFM,UAAU,CAAC,IAAI,CAACE,YAAY,EAAE,IAAI,CAAC;MACvC,CAAC;;MAED;MACA,MAAMD,SAAS,GAAIP,OAAgB,IAAK;QACpCH,MAAM,CAACE,OAAO,CAACC,OAAO,IAAI;UACtB;UACA/B,IAAI,CAACc,KAAK,CAAC0B,iBAAiB,CAACT,OAAO,CAAC;UAErCV,OAAO,CAACC,GAAG,CAAC,SAAS,EAAES,OAAO,CAAC;UAC/B;UACAA,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEU,mBAAmB,CAAC,OAAO,EAAGP,CAAM,IAAK;YAC9CI,SAAS,CAACP,OAAO,CAAC;UACtB,CAAC,CAAC;QACN,CAAC,CAAC;QAEFW,YAAY,CAACL,UAAU,CAAC,IAAI,CAACE,YAAY,CAAC,CAAC;QAC3CG,YAAY,CAACL,UAAU,CAAC,IAAI,CAACX,WAAW,CAAC,CAAC;MAC9C,CAAC;MAEDG,QAAQ,EAAE;MACVQ,UAAU,CAAC,IAAI,CAACX,WAAW,EAAE,IAAI,CAAC;IACtC,CAAC;IAAA,KAGDa,YAAY,GAAG,MAAM;MACjB,KAAK,IAAI5B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAC,IAAI,CAACR,mBAAmB,EAAE,EAAEQ,CAAC,EAAE,EAAE;QAC/C,MAAMoB,OAAO,GAAGP,QAAQ,CAACC,cAAc,CAACd,CAAC,CAACgC,QAAQ,EAAE,CAAC;QAErD3C,IAAI,CAACc,KAAK,CAAC0B,iBAAiB,CAACT,OAAO,CAAC;QACrCA,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEU,mBAAmB,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC;MACnD;;MAEA;IACJ,CAAC;IAAA,KAEDG,QAAQ,GAAG,MAAM;MACb,OAAO3C,KAAK;IAChB,CAAC;EAAA;AACL"},"metadata":{},"sourceType":"module","externalDependencies":[]}