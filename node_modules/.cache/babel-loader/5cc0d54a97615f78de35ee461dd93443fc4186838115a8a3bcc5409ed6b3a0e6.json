{"ast":null,"code":"import _toConsumableArray from\"/Users/soohoon/Desktop/kakao/20230207-jsh/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/soohoon/Desktop/kakao/20230207-jsh/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useSelector}from'react-redux';import mole from\"../../core/Mole\";import useMovePage from\"../../hooks/useMovePage\";import useInterval from\"../../hooks/useInterval\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProgressBar=function ProgressBar(){var _useSelector=useSelector(function(state){return{timer:state.data.timer,rankList:state.data.rankList,isStart:state.data.isStart,gameTime:state.data.gameTime};}),timer=_useSelector.timer,rankList=_useSelector.rankList,isStart=_useSelector.isStart,gameTime=_useSelector.gameTime;var _useMovePage=useMovePage(),_useMovePage2=_slicedToArray(_useMovePage,1),setPage=_useMovePage2[0];var _useState=useState(gameTime),_useState2=_slicedToArray(_useState,2),time=_useState2[0],setTime=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),score=_useState4[0],setScore=_useState4[1];useEffect(function(){setTime(gameTime);},[gameTime]);useInterval(function(){if(timer==='start'&&isStart){setTime(time-1);setScore(mole.module.getScore());if(time===0){mole.module.stopMole();mole.setState('rankList',[].concat(_toConsumableArray(rankList),[{score:mole.module.getScore(),sysdate:mole.utils.sysdate(new Date())}]));mole.setState('timer','end');mole.setState('showResult',true);mole.setState('score',mole.module.getScore());setPage('/rank');}}},1000);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"progress-wrap\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"progress-score\",children:\"\".concat(score,\"\\uC810\")}),/*#__PURE__*/_jsx(\"progress\",{className:\"progress-bar\",value:time,max:60}),/*#__PURE__*/_jsx(\"span\",{className:\"progress-timer\",children:\"\".concat(time,\"\\uCD08\")})]})});};export default/*#__PURE__*/React.memo(ProgressBar);","map":{"version":3,"names":["React","useState","useEffect","useSelector","mole","useMovePage","useInterval","ProgressBar","state","timer","data","rankList","isStart","gameTime","setPage","time","setTime","score","setScore","module","getScore","stopMole","setState","sysdate","utils","Date","memo"],"sources":["/Users/soohoon/Desktop/kakao/20230207-jsh/src/comp/module/ProgressBar.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { StoreStateType } from '../../type/Type';\nimport mole from \"../../core/Mole\";\nimport useMovePage from \"../../hooks/useMovePage\";\nimport useInterval from \"../../hooks/useInterval\";\n\nconst ProgressBar = () => {\n    const { timer, rankList, isStart, gameTime } = useSelector((state: StoreStateType) => {\n        return {\n            timer: state.data.timer,\n            rankList: state.data.rankList,\n            isStart: state.data.isStart,\n            gameTime: state.data.gameTime\n        }\n    });\n    const [ setPage ] = useMovePage();\n    const [ time, setTime ] = useState(gameTime);\n    const [ score, setScore ] = useState(0);\n    \n    useEffect(() => {\n        setTime(gameTime);\n    }, [gameTime])\n\n    useInterval(() => {\n        if (timer === 'start' && isStart) {\n            setTime(time - 1);\n            setScore(mole.module.getScore());\n\n            if (time === 0) {\n                mole.module.stopMole();\n                mole.setState('rankList', [...rankList, {score: mole.module.getScore(), sysdate: mole.utils.sysdate(new Date())} ])\n                mole.setState('timer', 'end');\n                mole.setState('showResult', true);\n                mole.setState('score', mole.module.getScore());\n                setPage('/rank');\n            }\n        }\n    }, 1000);\n\n    return (\n        <>\n        <div className='progress-wrap'>\n            <span className='progress-score'>{`${score}점`}</span>\n            <progress className='progress-bar' value={time} max={60}/>\n            <span className='progress-timer'>{`${time}초`}</span>\n        </div>\n        </>\n    )\n}\n\nexport default React.memo(ProgressBar);"],"mappings":"sQAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,aAAa,CAEzC,MAAOC,KAAI,KAAM,iBAAiB,CAClC,MAAOC,YAAW,KAAM,yBAAyB,CACjD,MAAOC,YAAW,KAAM,yBAAyB,CAAC,6IAElD,GAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CACtB,iBAA+CJ,WAAW,CAAC,SAACK,KAAqB,CAAK,CAClF,MAAO,CACHC,KAAK,CAAED,KAAK,CAACE,IAAI,CAACD,KAAK,CACvBE,QAAQ,CAAEH,KAAK,CAACE,IAAI,CAACC,QAAQ,CAC7BC,OAAO,CAAEJ,KAAK,CAACE,IAAI,CAACE,OAAO,CAC3BC,QAAQ,CAAEL,KAAK,CAACE,IAAI,CAACG,QACzB,CAAC,CACL,CAAC,CAAC,CAPMJ,KAAK,cAALA,KAAK,CAAEE,QAAQ,cAARA,QAAQ,CAAEC,OAAO,cAAPA,OAAO,CAAEC,QAAQ,cAARA,QAAQ,CAQ1C,iBAAoBR,WAAW,EAAE,8CAAzBS,OAAO,kBACf,cAA0Bb,QAAQ,CAACY,QAAQ,CAAC,wCAApCE,IAAI,eAAEC,OAAO,eACrB,eAA4Bf,QAAQ,CAAC,CAAC,CAAC,yCAA/BgB,KAAK,eAAEC,QAAQ,eAEvBhB,SAAS,CAAC,UAAM,CACZc,OAAO,CAACH,QAAQ,CAAC,CACrB,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEdP,WAAW,CAAC,UAAM,CACd,GAAIG,KAAK,GAAK,OAAO,EAAIG,OAAO,CAAE,CAC9BI,OAAO,CAACD,IAAI,CAAG,CAAC,CAAC,CACjBG,QAAQ,CAACd,IAAI,CAACe,MAAM,CAACC,QAAQ,EAAE,CAAC,CAEhC,GAAIL,IAAI,GAAK,CAAC,CAAE,CACZX,IAAI,CAACe,MAAM,CAACE,QAAQ,EAAE,CACtBjB,IAAI,CAACkB,QAAQ,CAAC,UAAU,8BAAMX,QAAQ,GAAE,CAACM,KAAK,CAAEb,IAAI,CAACe,MAAM,CAACC,QAAQ,EAAE,CAAEG,OAAO,CAAEnB,IAAI,CAACoB,KAAK,CAACD,OAAO,CAAC,GAAIE,KAAI,EAAE,CAAC,CAAC,GAAG,CACnHrB,IAAI,CAACkB,QAAQ,CAAC,OAAO,CAAE,KAAK,CAAC,CAC7BlB,IAAI,CAACkB,QAAQ,CAAC,YAAY,CAAE,IAAI,CAAC,CACjClB,IAAI,CAACkB,QAAQ,CAAC,OAAO,CAAElB,IAAI,CAACe,MAAM,CAACC,QAAQ,EAAE,CAAC,CAC9CN,OAAO,CAAC,OAAO,CAAC,CACpB,CACJ,CACJ,CAAC,CAAE,IAAI,CAAC,CAER,mBACI,sCACA,aAAK,SAAS,CAAC,eAAe,wBAC1B,aAAM,SAAS,CAAC,gBAAgB,oBAAKG,KAAK,YAAW,cACrD,iBAAU,SAAS,CAAC,cAAc,CAAC,KAAK,CAAEF,IAAK,CAAC,GAAG,CAAE,EAAG,EAAE,cAC1D,aAAM,SAAS,CAAC,gBAAgB,oBAAKA,IAAI,YAAW,GAClD,EACH,CAEX,CAAC,CAED,2BAAef,KAAK,CAAC0B,IAAI,CAACnB,WAAW,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}